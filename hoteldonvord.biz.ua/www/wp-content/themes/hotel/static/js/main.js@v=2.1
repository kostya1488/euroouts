"use strict";var _createClass=function(){function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}}();function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(i){var n={};function o(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return i[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=i,o.c=n,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,i){t.exports=i(1)},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var o=i(2),s=i(3);!function(n){n(".slider1_container").each(function(t,e){var i="slider1_container"+t;n(e).attr("id",i),new $JssorSlider$(i,{$AutoPlay:!0})});var t=new o.a(".modal-book",".button_modal-open",".modal__close").init();new s.a(".modal-book__form",function(){t.close()}).init()}(jQuery)},function(t,e,i){var n=function(){function n(t,e,i){_classCallCheck(this,n),this.modalSelector=t,this.openSelector=e,this.closeSelector=i}return _createClass(n,[{key:"init",value:function(){return this.$open=$(this.openSelector),this.$modal=$(this.modalSelector),this.$modal.iziModal({bodyOverflow:!0}),this.applyEvents(),this}},{key:"applyEvents",value:function(){var i=this;this.$open.on("click",function(t){if(t.preventDefault(),t&&t.currentTarget){var e=$(t.currentTarget.hash);e.length&&i.open(e)}}),this.$modal.on("click",this.closeSelector,function(t){t.preventDefault(),i.close()})}},{key:"open",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.$modal).iziModal("open")}},{key:"close",value:function(){(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.$modal).iziModal("close")}}]),n}();e.a=n},function(t,e,i){var o=i(4),n=function(){function i(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};_classCallCheck(this,i),this.inputErrorClass="form__input_error",this.submitLoadingClass="button_loading",this.submitSelector=".form__submit",this.inputSelector=".form__input",this.notificationStatusClasses={success:"form__notification_success",fail:"form__notification_fail"},this.selector=t,this.onSuccess=e}return _createClass(i,[{key:"init",value:function(){var n=this;return this.$form=$(this.selector),this.$submit=this.$form.find(this.submitSelector),this.$input=this.$form.find(this.inputSelector),this.url=this.$form.attr("action"),this.$input.filter('[type="tel"]').intlTelInput({onlyCountries:["ru","am","az","by","ge","kg","lv","lt","md","tj","tm","ua","uz","ee"],preferredCountries:["ru"],nationalMode:!1,separateDialCode:!0,hiddenInput:"phone-with-code"}).on("countrychange",function(t){n.setInputMaskByPlaceholder(t.currentTarget),t.currentTarget.value=""}),this.$form.on("submit",function(t){t.preventDefault(),n.sendForm()}),this.$input.on("focus",function(t){n.removeInputError(t.currentTarget)}),this.$input.each(function(t,e){if(e.dataset.validationType){var i=new o.a(e,e.dataset.validationType).init();$(e).data("validate",i)}"tel"===e.type&&n.setInputMaskByPlaceholder(e)}),this}},{key:"checkFields",value:function(){var n=this,o=!0;return this.$input.filter('[data-required="true"]').each(function(t,e){var i=$(e);""===i.val()||i.data("validate")&&!i.data("validate").isValid()||i.inputmask("getmetadata")&&!i.inputmask("isComplete")?(n.addInputError(e),o=!1):n.removeInputError(e)}),o}},{key:"showNotification",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"success",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3e3,n="success"===t?this.notificationStatusClasses.success:this.notificationStatusClasses.fail,o=this.getNotificationMarkup(n,e).hide();this.$submit.after(o),o.show(300),setTimeout(function(){o.hide(200).remove()},i)}},{key:"getNotificationMarkup",value:function(t,e){return $('\n            <div class="form__notification '+t+'">'+e+"</div>\n        ")}},{key:"addInputError",value:function(t){$(t).addClass(this.inputErrorClass)}},{key:"removeInputError",value:function(t){$(t).removeClass(this.inputErrorClass)}},{key:"addLoading",value:function(){this.$submit.addClass(this.submitLoadingClass).attr("disabled","disabled")}},{key:"removeLoading",value:function(){this.$submit.removeClass(this.submitLoadingClass).removeAttr("disabled")}},{key:"sendForm",value:function(){var e=this;this.checkFields()&&!this.$submit.hasClass(this.submitLoadingClass)&&(this.addLoading(),$.post(this.url,this.$form.serialize()).done(function(t){t&&(t=JSON.parse(t)),200===t.error?(e.showNotification("success","Ваша заявка прината. Спасибо!"),e.$form.trigger("reset"),setTimeout(function(){e.onSuccess()},3e3)):e.showNotification("fail","К сожалению, произошла ошибка.")}).fail(function(){e.showNotification("fail","К сожалению, произошла ошибка.")}).always(function(){setTimeout(function(){e.removeLoading()},3e3)}))}},{key:"setInputMaskByPlaceholder",value:function(t){$(t).inputmask(t.placeholder.replace(/\d/g,"9"))}}]),i}();e.a=n},function(t,e,i){var n=function(){function i(t,e){_classCallCheck(this,i),this.types={tel:/^(()|(8 )|(\+7 ))\d{3} \d{3} \d{2} \d{2}$/,email:/^.+@.+$/},this.input=t,this.type=e}return _createClass(i,[{key:"init",value:function(){return this.$input=$(this.input),this.type=this.types[this.type],this}},{key:"isValid",value:function(){return this.$input.length&&this.type&&this.type.test(this.$input.val())}}]),i}();e.a=n}]);